groups:
  - name: cofound_alerts
    rules:
      - alert: HighRateLimitRejections
        expr: increase(cofound_rate_limit_rejections_total[5m]) > 20
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "High rate limit rejections"
          description: "cofound_rate_limit_rejections_total increased by {{ $value }} in the last 5m"

      - alert: LowSocketConnections
        expr: cofound_socket_connections < 1
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Low number of socket connections"
          description: "Socket connections dropped below 1 for more than 5 minutes"

      - alert: HighHttpErrors
        expr: increase(cofound_http_errors_total[5m]) > 5
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "High number of HTTP 5xx errors"
          description: "cofound_http_errors_total increased by {{ $value }} in the last 5m. Investigate recent 5xx responses and server logs."
